:root{
  --bg: #070a12;
  --fg: rgba(255,255,255,0.92);
  --muted: rgba(255,255,255,0.62);
  --panel: rgba(255,255,255,0.06);
  --panel2: rgba(255,255,255,0.08);
  --stroke: rgba(255,255,255,0.24);
  --hot: rgba(255,255,255,0.95);
}

*{ box-sizing: border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  background: radial-gradient(1200px 800px at 50% 35%, rgba(110,160,255,0.10), rgba(0,0,0,0.0)),
              radial-gradient(800px 600px at 20% 70%, rgba(255,140,180,0.09), rgba(0,0,0,0.0)),
              var(--bg);
  color: var(--fg);
  overflow:hidden;
}

.topbar{
  height: 64px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding: 0 16px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
  background: rgba(0,0,0,0.25);
  backdrop-filter: blur(10px);
}

.brand{
  display:flex;
  align-items:center;
  gap: 12px;
}
.brand .dot{
  width: 12px; height: 12px;
  border-radius: 999px;
  background: rgba(130,220,255,0.9);
  box-shadow: 0 0 22px rgba(130,220,255,0.6);
}
.title{ font-weight: 700; letter-spacing: 0.2px; }
.subtitle{ font-size: 12px; color: var(--muted); margin-top: 2px; }

.controls{
  display:flex;
  align-items:center;
  gap: 10px;
}
button{
  appearance:none;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: var(--fg);
  padding: 8px 10px;
  border-radius: 10px;
  cursor:pointer;
  transition: transform 120ms ease, background 120ms ease, border 120ms ease;
}
button:hover{
  background: rgba(255,255,255,0.10);
  border-color: rgba(255,255,255,0.22);
  transform: translateY(-1px);
}
button:active{ transform: translateY(0px); }

.speed{
  display:flex;
  align-items:center;
  gap: 8px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  font-size: 12px;
  color: var(--muted);
}
.speed input{ width: 120px; }
#speedVal{ color: var(--fg); font-weight: 600; min-width: 52px; text-align:right; }

.stage{
  position: relative;
  height: calc(100% - 64px);
  width: 100%;
}

.panel{
  position:absolute;
  left: 16px;
  top: 16px;
  width: 320px;
  max-width: calc(100% - 32px);
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.12);
  border-radius: 16px;
  padding: 14px;
  backdrop-filter: blur(10px);
  box-shadow: 0 18px 40px rgba(0,0,0,0.35);
  z-index: 3;
}
.panel-title{
  font-weight: 800;
  margin-bottom: 8px;
  letter-spacing: 0.2px;
}
.panel-body{
  color: var(--muted);
  font-size: 13px;
  line-height: 1.35;
}
.panel-stats{
  margin-top: 12px;
  display:grid;
  grid-template-columns: 1fr 1fr;
  gap: 8px;
  font-size: 12px;
}
.stat{
  background: rgba(255,255,255,0.06);
  border: 1px solid rgba(255,255,255,0.10);
  border-radius: 12px;
  padding: 8px;
}
.stat .k{ color: var(--muted); font-size: 11px; }
.stat .v{ font-weight: 800; margin-top: 2px; }
.panel-hint{
  margin-top: 10px;
  font-size: 12px;
  color: rgba(255,255,255,0.58);
}

.cell-svg{
  width: 100%;
  height: 100%;
  display:block;
}

/* Organelles styling */
.membrane{
  fill: rgba(70,180,255,0.06);
  stroke: rgba(180,230,255,0.25);
  stroke-width: 3;
}
.membrane-inner{
  fill: rgba(255,140,190,0.04);
  stroke: rgba(255,255,255,0.12);
  stroke-width: 2;
}

.organelle{
  cursor: pointer;
  transform-origin: center;
}
.organelle .label{
  font-size: 14px;
  fill: rgba(255,255,255,0.68);
  opacity: 0.0;
  pointer-events:none;
}
.organelle:hover .label{ opacity: 0.9; }

.nucleus{
  fill: rgba(200,150,255,0.12);
  stroke: rgba(240,220,255,0.35);
  stroke-width: 2.5;
}
.nucleolus{
  fill: rgba(255,190,220,0.16);
  stroke: rgba(255,255,255,0.18);
  stroke-width: 2;
}
.chromatin{
  fill:none;
  stroke: rgba(255,255,255,0.35);
  stroke-width: 2.5;
  stroke-linecap: round;
}
.dna{
  fill:none;
  stroke: rgba(180,230,255,0.9);
  stroke-width: 3;
  stroke-linecap: round;
  filter: url(#softGlow);
}

.mito{
  fill: rgba(255,170,120,0.12);
  stroke: rgba(255,220,180,0.35);
  stroke-width: 2.5;
}
.cristae{
  fill:none;
  stroke: rgba(255,255,255,0.40);
  stroke-width: 2.2;
  stroke-linecap: round;
}

.golgi{
  fill:none;
  stroke: rgba(255,255,255,0.48);
  stroke-width: 3;
  stroke-linecap: round;
}
.vesicle{
  fill: rgba(255,255,255,0.35);
  stroke: rgba(255,255,255,0.18);
  stroke-width: 1.2;
}

.er{
  fill:none;
  stroke: rgba(255,255,255,0.44);
  stroke-width: 3;
  stroke-linecap: round;
}
.ribosome{
  fill: rgba(255,255,255,0.55);
}

.lyso{
  fill: rgba(140,255,180,0.10);
  stroke: rgba(200,255,220,0.30);
  stroke-width: 2.5;
}
.lyso-swirl{
  fill:none;
  stroke: rgba(255,255,255,0.42);
  stroke-width: 2.3;
  stroke-linecap: round;
}

/* Detail groups are only visible when focused */
.detail{ opacity: 0; transition: opacity 180ms ease; pointer-events:none; }
.focused .detail{ opacity: 1; }

/* Cytoplasm particles */
.cytodot{
  fill: rgba(255,255,255,0.10);
}

/* Live micro-sim particles */
.p{
  opacity: 0.92;
  filter: url(#softGlow);
}

/* Small “alive” wobble */
@keyframes floaty {
  0% { transform: translate(0px, 0px); }
  50% { transform: translate(0px, -1.6px); }
  100% { transform: translate(0px, 0px); }
}
.organelle{ animation: floaty 3.2s ease-in-out infinite; }
.organelle:nth-child(2){ animation-duration: 3.8s; }
.organelle:nth-child(3){ animation-duration: 4.3s; }
.organelle:nth-child(4){ animation-duration: 3.6s; }
